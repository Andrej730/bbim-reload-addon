bl_info = {
    "name": "BBIM reload",
    "author": "bdamay",
    "version": (0, 1),
    "blender": (4,0,0),
    "location": "File Menu",
    "description": "Reload bbim classes",
    "warning": "",
    "wiki_url": "",
    "tracker_url": "",
    "category": "System"
}

import bpy
import os, sys
import subprocess
import importlib
from datetime import datetime 


class BBIM_reload():

    bl_startdate = datetime.now()

    def execute(self):
        
        
        
        reregister_classes = {
            "blenderbim.bim.module.demo.ui": ("BIM_PT_demo", )
        }   
        print("reloading bbim recent files", self.bl_startdate)
        
        for module_name, classes in reregister_classes.items():
            module = importlib.import_module(module_name)
            for class_name in classes:
                class_obj = getattr(module, class_name)
                bpy.utils.unregister_class(class_obj)

            importlib.reload(module)

            for class_name in classes:
                class_obj = getattr(module, class_name)
                bpy.utils.register_class(class_obj)

        return {'FINISHED'}


def menu_draw(self, context):
    layout = self.layout
    layout.separator()
    layout.operator("wm.bbim_reload", text="Reload_bbim", icon='PLUGIN')


if __name__ == "__main__":
    br = BBIM_reload()
    br.execute()
